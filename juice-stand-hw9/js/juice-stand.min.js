function Customer(a){this.gender=a;this.init=function(){this.id="customer-"+game.customer_num;this.patience=game.customer_patience;game.customer_num++;game.customers.push(this);game.$customers.append(this.icon());$(document).on("click","#"+this.id,this.serve)};this.serve=function(){game.juice_sell();game.customer_find(this.id).leave("satisfied")};this.icon=function(){return'<i class="fa fa-'+this.gender+' customer" id="'+this.id+'"></i>'};this.wait=function(){this.patience--;if(0>=this.patience){this.leave("pissed");return false}else{patience_ratio=this.patience/game.customer_patience;if(0.1001>patience_ratio){$("#"+this.id).css("color","#e74276")}else{if(0.5001>patience_ratio){$("#"+this.id).css("color","#ff7a49")}}}return true};this.leave=function(b){index=game.customers.indexOf(this);game.customers.splice(index,1);$("#"+this.id).remove()};this.init()}Customer.prototype.kind="customer";$(function(){game={paused:false,max_occupancy:14,customer_num:1,serving_size:0.15,customer_patience:30,juice_per_fruit:0.21,storage_save_key:"juice_save_state"};game.init=function(){game.$stand_name=$("#stand p");game.$account=$("#account-value");game.$price=$("#price-value");game.$u_date=$("#date");game.$date=$("#date h2");game.$hour=$("#hour");game.$minute=$("#minute");game.$meridiem=$("#meridiem");game.$fruit=$("#inventory p");game.$juice=$("#product-value");game.$customers=$("#customers p");found=game.offline_data();if(offline_mode&&!found){$.colorbox({html:"<header>You are not currently connected to the internet and do not have a locally saved game.</header>",height:"150px",width:"320px",closeButton:false,overlayClose:false,escKey:false});return}game.clock_init();game.customers_init();game.fruit=parseInt(game.$fruit.text());game.juice=parseFloat(game.$juice.text());game.price=parseFloat(game.$price.text());game.account=parseFloat(game.$account.text());$(document).on("keyup",game.check_keys);$(document).on("click","#pause",game.pause);$(document).on("click","#save",game.save);$(document).on("click","#reset",game.reset);$(document).on("click","#logout",game.logout);$(document).on("mouseover","#inventory",game.fruit_options);$(document).on("mouseout","#inventory",game.fruit_options_hide);$(document).on("click","#inventory button",function(a){game.fruit_buy($(this).data("amount"))});$(document).on("mouseover","#product",game.juice_options);$(document).on("mouseout","#product",game.juice_options_hide);$(document).on("click","#product button",function(b){var a=$(this).data("amount");if(a=="all"){a=game.fruit}game.juice_make(a)});$(document).on("closing-time",game.juice_expire);$(document).on("closing-time",game.fruit_expire)};game.check_keys=function(a){if(a.keyCode==27&&!game.paused){game.pause()}};game.save=function(){$("#form_name").val(game.$stand_name.text());$("#form_balance").val(game.account);$("#form_price").val(game.price);$("#form_customers").val(game.customers.length);$("#form_juice").val(game.juice);$("#form_fruit").val(game.fruit);$("#form_u_date").val(game.$u_date.data("date"));$("#form_date").val(game.$date.text());$("#form_time").val(game.$hour.text()+":"+game.$minute.text()+" "+game.$meridiem.text());game.$save_form=$("#save_form");game.$save_form.submit(function(a){a.preventDefault()});$.blockUI("<h2>Game is Saving!</h2>");$.post("save.php",game.$save_form.serializeObject(),game.callback);console.log(game.$save_form.serializeObject());localStorage.setItem(game.storage_save_key,JSON.stringify(game.$save_form.serializeObject()))};game.callback=function(){$.unblockUI();$.colorbox.close()};game.offline_data=function(){saved_state=localStorage.getItem(game.storage_save_key);if(!saved_state||"{}"==saved_state){return false}game.saved_state_obj=JSON.parse(saved_state);if(game.saved_state_obj.u_date<=game.u_date){return false}game.$stand_name.html(game.saved_state_obj.name);game.$account.html(parseFloat(game.saved_state_obj.balance).toFixed(2));game.$price.html(parseFloat(game.saved_state_obj.price).toFixed(2));game.$fruit.html(game.saved_state_obj.fruit);game.$juice.html(parseFloat(game.saved_state_obj.juice).toFixed(3));game.$customers.html(game.saved_state_obj.customers);game.$u_date.data("date",game.saved_state_obj.u_date);game.$date.html(game.saved_state_obj.date);time=game.saved_state_obj.time.split(":");game.$hour.html(time[0]);time=time[1].split(" ");game.$minute.html(time[0]);game.$meridiem.html(time[1]);return true};game.reset=function(){game.clock_reset();game.clock_update();game.account=20;game.account_change(0);game.price_set(0.5);game.fruit=0;game.fruit_change(0);game.juice_set(0);game.customers=[];game.$customers.html("")};game.logout=function(){window.location+="?logout"};game.pause=function(){game.clock_stop();game.paused=true;$.colorbox({href:"pause.php",onClosed:game.unpause,title:"Game is paused"})};game.unpause=function(){if(!game.paused){return false}game.clock_start();game.paused=false};game.clock_init=function(){$("header").append('<i class="fa fa-pause" id="pause"></i>');game.u_date=game.$u_date.data("date");game.clock_reset();game.clock.hour=parseInt(game.$hour.text());game.clock.minute=parseInt(game.$minute.text());game.clock.meridiem=game.$meridiem.text();game.clock_start()};game.clock_start=function(){if(game.clock.interval){return false}game.clock.interval=window.setInterval(game.clock_update,game.clock.delay)};game.clock_stop=function(){clearInterval(game.clock.interval);game.clock.interval=false};game.clock_reset=function(){game.clock={hour:8,minute:0,meridiem:"AM",count:0,pad:"00",delay:500,speed:2,increment:1,interval:false}};game.clock_update=function(){game.clock.count+=game.clock.delay;$(document).trigger("tick");if(game.clock.count%(game.clock.delay*game.clock.speed)){$("#separator").html("&nbsp;");game.clock.minute+=game.clock.increment;game.u_date+=60;if(60<=game.clock.minute){game.clock.minute=0;game.clock.hour++;if(12==game.clock.hour){if("AM"==game.clock.meridiem){game.clock.meridiem="PM"}else{game.clock.meridiem="AM"}}else{if(13<=game.clock.hour){game.clock.hour=1}else{if(5==game.clock.hour&&"PM"==game.clock.meridiem){$(document).trigger("closing-time");game.clock_stop()}}}}game.$u_date.data("date",game.u_date);game.$hour.html(game.clock.hour);game.$minute.html(game.clock_padded_minute());game.$meridiem.html(game.clock.meridiem)}else{$("#separator").html(":")}};game.clock_padded_minute=function(){var a=""+game.clock.minute;return game.clock.pad.substring(0,game.clock.pad.length-a.length)+a};game.clock_time=function(){return game.clock.hour+":"+game.clock_padded_minute()+" "+game.clock.meridiem};game.customers_init=function(){game.customers=[];customer_count=parseInt(game.$customers.text());game.$customers.html("");for(i=0;i<customer_count;i++){gender=Math.floor(Math.random()*2)==1?"male":"female";game.customers_add(gender)}$(document).on("tick",game.customers_handle)};game.customers_handle=function(){game.customers_waiting();if(game.customers.length>=game.max_occupancy){return}var a=Math.floor((Math.random()*100));if(a<89){}else{if(a<93){game.customers_add("male")}else{if(a<97){game.customers_add("female")}else{if(a<98){game.customers_add("male");game.customers_add("male")}else{if(a<99){game.customers_add("female");game.customers_add("female")}else{if(a<100){game.customers_add("female");game.customers_add("male")}}}}}}};game.customers_add=function(b){var a=new Customer(b)};game.customers_waiting=function(){for(i=game.customers.length-1;i>=0;i--){game.customers[i].wait()}};game.customer_find=function(a){for(i=game.customers.length-1;i>=0;i--){if(game.customers[i].id==a){return game.customers[i]}}};game.juice_options=function(){$("#product div").show()};game.juice_options_hide=function(){$("#product div").hide()};game.juice_set=function(a){game.juice=a;game.$juice.html(game.juice.toFixed(3))};game.juice_sell=function(){amount=game.juice-game.serving_size;if(amount<0){return false}game.juice_set(amount);game.account_change(game.price);return true};game.juice_make=function(a){if(game.fruit-a<0){return false}game.fruit_change(-a);a=game.juice+(a*game.juice_per_fruit);game.juice_set(a);return true};game.juice_expire=function(){game.juice_set(0)};game.account_change=function(a){game.account+=a;game.$account.html(game.account.toFixed(2))};game.fruit_options=function(){$("#inventory div").show();$("#inventory p").css("text-align","left")};game.fruit_options_hide=function(){$("#inventory div").hide();$("#inventory p").css("text-align","center")};game.fruit_expire=function(){game.fruit_set(Math.ceil(game.fruit/2))};game.fruit_change=function(a){game.fruit+=a;game.$fruit.html(game.fruit)};game.fruit_set=function(a){game.fruit=a;game.$fruit.html(a)};game.fruit_buy=function(a){switch(a){case 140:cost=21;break;case 30:cost=6;break;case 4:cost=1;break;case 1:cost=0.3;break;default:return false}if(cost>game.account){return false}game.account_change(-cost);game.fruit_change(a);return true};game.price_set=function(a){game.price=a;game.$price.html(game.price.toFixed(2))};game.init()});$(function(){$(document).on("click","#sign-up-link, #sign-in-link",function(f){f.preventDefault();$("#sign-up-form").toggle();$("#sign-in-form").toggle()});var d=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,7}$/;var c=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,7})([\/\w \.-]*)*\/?$/;var b=/^@([a-zA-Z0-9_]{1,15})$/;var a=/^[a-zA-Z]+$/;$(document).on("submit","#sign-in-form",function(g){var f=false;if(null==$("#sign-in-email").val().match(d)){f="Please provide a valid email"}else{if(""==$("#sign-in-password").val()){f="Password must not be empty"}}if(f){g.preventDefault();$("#sign-in-error").html(f)}});$(document).on("submit","#sign-up-form",function(g){var f=false;if(null==$("#sign-up-email").val().match(d)){f="Please provide a valid email"}else{if($("#sign-up-password").val()!=$("#sign-up-password_confirm").val()){f="Passwords must match"}else{if(""==$("#sign-up-password").val()){f="Password must not be empty"}else{if(null==$("#sign-up-url").val().match(c)){f="Bad URL"}else{if(null==$("#sign-up-twitter").val().match(b)){f="Bad Twitter handle"}}}}}if(f){g.preventDefault();$("#sign-up-error").html(f)}})});$.colorbox=function(){};test("Price set",function(){expect(4);game.price_set(1);equal(game.$price.text(),"1.00","Integer price set with decimal");game.price_set(2.25);equal(game.$price.text(),"2.25","Integer price set with double");game.price_set(3.251);equal(game.$price.text(),"3.25","Integer price set with double, rounded down on partial cents");game.price_set(4.256);equal(game.$price.text(),"4.26","Integer price set with double, rounded up on partial cents")});asyncTest("Pause",function(){expect(3);game.pause();ok(game.paused==true,"Passed, pause state.");ok(game.clock.interval==false,"Passed, clock stop state.");var a=game.$minute.text();setTimeout(function(){var b=game.$minute.text();ok(b==a,"Passed, clock is not changing.");start();game.unpause()},1100)});test("Fruit buy",function(){var a=game.account;game.fruit_set(0);equal(game.$fruit.text(),"0","Fruit text set to zero successfully.");equal(game.fruit,0,"Fruit value set to zero successfully.");game.fruit_buy(1);equal(game.$fruit.text(),"1","Fruit text shows a single piece of fruit.");equal(game.fruit,1,"Fruit value shows a single piece of fruit.");equal(game.account,a-0.3,"Wallet reflects fruit change.")});test("Juice make",function(){var b=game.fruit;var a=game.juice;game.juice_make(1);b--;a+=(1*game.juice_per_fruit);equal(game.$fruit.text(),String(b),"Fruit text quantity properly reduced.");equal(game.fruit,b,"Fruit value properly decremented.");equal(game.$juice.text(),String(a.toFixed(3)),"Juice text incremented properly.");equal(game.juice,a,"Juice value incremented properly.")});test("Juice sell",function(){var b=game.juice;var a=game.account;game.juice_sell();b-=game.serving_size;a+=game.price;equal(game.$juice.text(),String(b.toFixed(3)),"Juice text properly updated.");equal(game.juice,b,"Juice value is correct.");equal(game.$account.text(),String(a.toFixed(2)),"Account text properly incremented.");equal(game.account,a,"Account value properly incremented.")});asyncTest("Clock",function(){expect(6);game.$hour.text("11");game.clock.hour=11;game.$minute.text("59");game.clock.minute=59;var d=game.clock.meridiem;var f=game.$meridiem.text();var a=game.clock.hour;var c=game.$hour.text();var e=game.clock.minute;var b=game.$minute.text();setTimeout(function(){var j=game.clock.meridiem;var h=game.$meridiem.text();var m=game.clock.hour;var g=game.$hour.text();var k=game.clock.minute;var l=game.$minute.text();ok(j!=d,"Passed, meridiem text works.");ok(h!=f,"Passed, meridiem value works.");ok(m==12,"Passed, hour changed correctly.");ok(g=="12","Passed, hour text changed correctly.");ok(k==0,"Passed, minute value changed correctly.");ok(l=="00","Passed, minute text changed correctly.");start()},1100)});asyncTest("Closing Time",function(){expect(4);game.$hour.text("4");game.clock.hour=4;game.$minute.text("59");game.clock.minute=59;game.$meridiem.text("PM");game.clock.meridiem="PM";var a=game.fruit;setTimeout(function(){var b=game.clock.hour;ok(b==5,"Clock shows 5.");start()},1100);stop();setTimeout(function(){var b=game.clock.minute;var d=game.juice;var c=game.fruit;ok(b==0,"Clock doesn't move after five.");ok(d==0,"Juice is properly set to zero.");ok(c==(Math.ceil(a/2)),"Fruit is properly halved after close.");start()},1100)});
/*!
 * jQuery blockUI plugin
 * Version 2.66.0-2013.10.09
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
;(function(){function a(k){k.fn._fadeIn=k.fn.fadeIn;var d=k.noop||function(){};var o=/MSIE/.test(navigator.userAgent);var f=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var l=document.documentMode||0;var g=k.isFunction(document.createElement("div").style.setExpression);k.blockUI=function(s){e(window,s)};k.unblockUI=function(s){j(window,s)};k.growlUI=function(y,v,w,t){var u=k('<div class="growlUI"></div>');if(y){u.append("<h1>"+y+"</h1>")}if(v){u.append("<h2>"+v+"</h2>")}if(w===undefined){w=3000}var s=function(z){z=z||{};k.blockUI({message:u,fadeIn:typeof z.fadeIn!=="undefined"?z.fadeIn:700,fadeOut:typeof z.fadeOut!=="undefined"?z.fadeOut:1000,timeout:typeof z.timeout!=="undefined"?z.timeout:w,centerY:false,showOverlay:false,onUnblock:t,css:k.blockUI.defaults.growlCSS})};s();var x=u.css("opacity");u.mouseover(function(){s({fadeIn:0,timeout:30000});var z=k(".blockMsg");z.stop();z.fadeTo(300,1)}).mouseout(function(){k(".blockMsg").fadeOut(1000)})};k.fn.block=function(t){if(this[0]===window){k.blockUI(t);return this}var s=k.extend({},k.blockUI.defaults,t||{});this.each(function(){var u=k(this);if(s.ignoreIfBlocked&&u.data("blockUI.isBlocked")){return}u.unblock({fadeOut:0})});return this.each(function(){if(k.css(this,"position")=="static"){this.style.position="relative";k(this).data("blockUI.static",true)}this.style.zoom=1;e(this,t)})};k.fn.unblock=function(s){if(this[0]===window){k.unblockUI(s);return this}return this.each(function(){j(this,s)})};k.blockUI.version=2.66;k.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var c=null;var h=[];function e(w,I){var F,Q;var D=(w==window);var A=(I&&I.message!==undefined?I.message:undefined);I=k.extend({},k.blockUI.defaults,I||{});if(I.ignoreIfBlocked&&k(w).data("blockUI.isBlocked")){return}I.overlayCSS=k.extend({},k.blockUI.defaults.overlayCSS,I.overlayCSS||{});F=k.extend({},k.blockUI.defaults.css,I.css||{});if(I.onOverlayClick){I.overlayCSS.cursor="pointer"}Q=k.extend({},k.blockUI.defaults.themedCSS,I.themedCSS||{});A=A===undefined?I.message:A;if(D&&c){j(window,{fadeOut:0})}if(A&&typeof A!="string"&&(A.parentNode||A.jquery)){var L=A.jquery?A[0]:A;var S={};k(w).data("blockUI.history",S);S.el=L;S.parent=L.parentNode;S.display=L.style.display;S.position=L.style.position;if(S.parent){S.parent.removeChild(L)}}k(w).data("blockUI.onUnblock",I.onUnblock);var E=I.baseZ;var P,O,N,J;if(o||I.forceIframe){P=k('<iframe class="blockUI" style="z-index:'+(E++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+I.iframeSrc+'"></iframe>')}else{P=k('<div class="blockUI" style="display:none"></div>')}if(I.theme){O=k('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(E++)+';display:none"></div>')}else{O=k('<div class="blockUI blockOverlay" style="z-index:'+(E++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(I.theme&&D){J='<div class="blockUI '+I.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(E+10)+';display:none;position:fixed">';if(I.title){J+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(I.title||"&nbsp;")+"</div>"}J+='<div class="ui-widget-content ui-dialog-content"></div>';J+="</div>"}else{if(I.theme){J='<div class="blockUI '+I.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(E+10)+';display:none;position:absolute">';if(I.title){J+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(I.title||"&nbsp;")+"</div>"}J+='<div class="ui-widget-content ui-dialog-content"></div>';J+="</div>"}else{if(D){J='<div class="blockUI '+I.blockMsgClass+' blockPage" style="z-index:'+(E+10)+';display:none;position:fixed"></div>'}else{J='<div class="blockUI '+I.blockMsgClass+' blockElement" style="z-index:'+(E+10)+';display:none;position:absolute"></div>'}}}N=k(J);if(A){if(I.theme){N.css(Q);N.addClass("ui-widget-content")}else{N.css(F)}}if(!I.theme){O.css(I.overlayCSS)}O.css("position",D?"fixed":"absolute");if(o||I.forceIframe){P.css("opacity",0)}var C=[P,O,N],R=D?k("body"):k(w);k.each(C,function(){this.appendTo(R)});if(I.theme&&I.draggable&&k.fn.draggable){N.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var y=g&&(!k.support.boxModel||k("object,embed",D?null:w).length>0);if(f||y){if(D&&I.allowBodyStretch&&k.support.boxModel){k("html,body").css("height","100%")}if((f||!k.support.boxModel)&&!D){var H=p(w,"borderTopWidth"),M=p(w,"borderLeftWidth");var B=H?"(0 - "+H+")":0;var G=M?"(0 - "+M+")":0}k.each(C,function(t,V){var z=V[0].style;z.position="absolute";if(t<2){if(D){z.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+I.quirksmodeOffsetHack+') + "px"')}else{z.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(D){z.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{z.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(G){z.setExpression("left",G)}if(B){z.setExpression("top",B)}}else{if(I.centerY){if(D){z.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}z.marginTop=0}else{if(!I.centerY&&D){var T=(I.css&&I.css.top)?parseInt(I.css.top,10):0;var U="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+T+') + "px"';z.setExpression("top",U)}}}})}if(A){if(I.theme){N.find(".ui-widget-content").append(A)}else{N.append(A)}if(A.jquery||A.nodeType){k(A).show()}}if((o||I.forceIframe)&&I.showOverlay){P.show()}if(I.fadeIn){var K=I.onBlock?I.onBlock:d;var v=(I.showOverlay&&!A)?K:d;var u=A?K:d;if(I.showOverlay){O._fadeIn(I.fadeIn,v)}if(A){N._fadeIn(I.fadeIn,u)}}else{if(I.showOverlay){O.show()}if(A){N.show()}if(I.onBlock){I.onBlock()}}n(1,w,I);if(D){c=N[0];h=k(I.focusableElements,c);if(I.focusInput){setTimeout(r,20)}}else{b(N[0],I.centerX,I.centerY)}if(I.timeout){var x=setTimeout(function(){if(D){k.unblockUI(I)}else{k(w).unblock(I)}},I.timeout);k(w).data("blockUI.timeout",x)}}function j(v,x){var w;var u=(v==window);var t=k(v);var y=t.data("blockUI.history");var z=t.data("blockUI.timeout");if(z){clearTimeout(z);t.removeData("blockUI.timeout")}x=k.extend({},k.blockUI.defaults,x||{});n(0,v,x);if(x.onUnblock===null){x.onUnblock=t.data("blockUI.onUnblock");t.removeData("blockUI.onUnblock")}var s;if(u){s=k("body").children().filter(".blockUI").add("body > .blockUI")}else{s=t.find(">.blockUI")}if(x.cursorReset){if(s.length>1){s[1].style.cursor=x.cursorReset}if(s.length>2){s[2].style.cursor=x.cursorReset}}if(u){c=h=null}if(x.fadeOut){w=s.length;s.stop().fadeOut(x.fadeOut,function(){if(--w===0){m(s,y,x,v)}})}else{m(s,y,x,v)}}function m(x,A,z,y){var v=k(y);if(v.data("blockUI.isBlocked")){return}x.each(function(w,B){if(this.parentNode){this.parentNode.removeChild(this)}});if(A&&A.el){A.el.style.display=A.display;A.el.style.position=A.position;if(A.parent){A.parent.appendChild(A.el)}v.removeData("blockUI.history")}if(v.data("blockUI.static")){v.css("position","static")}if(typeof z.onUnblock=="function"){z.onUnblock(y,z)}var s=k(document.body),u=s.width(),t=s[0].style.width;s.width(u-1).width(u);s[0].style.width=t}function n(s,w,x){var v=w==window,u=k(w);if(!s&&(v&&!c||!v&&!u.data("blockUI.isBlocked"))){return}u.data("blockUI.isBlocked",s);if(!v||!x.bindEvents||(s&&!x.showOverlay)){return}var t="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(s){k(document).bind(t,x,q)}else{k(document).unbind(t,q)}}function q(x){if(x.type==="keydown"&&x.keyCode&&x.keyCode==9){if(c&&x.data.constrainTabKey){var u=h;var t=!x.shiftKey&&x.target===u[u.length-1];var s=x.shiftKey&&x.target===u[0];if(t||s){setTimeout(function(){r(s)},10);return false}}}var v=x.data;var w=k(x.target);if(w.hasClass("blockOverlay")&&v.onOverlayClick){v.onOverlayClick(x)}if(w.parents("div."+v.blockMsgClass).length>0){return true}return w.parents().children().filter("div.blockUI").length===0}function r(s){if(!h){return}var t=h[s===true?h.length-1:0];if(t){t.focus()}}function b(A,u,C){var B=A.parentNode,z=A.style;var v=((B.offsetWidth-A.offsetWidth)/2)-p(B,"borderLeftWidth");var w=((B.offsetHeight-A.offsetHeight)/2)-p(B,"borderTopWidth");if(u){z.left=v>0?(v+"px"):"0"}if(C){z.top=w>0?(w+"px"):"0"}}function p(s,t){return parseInt(k.css(s,t),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}})();
/*!
	Colorbox v1.4.33 - 2013-10-31
	jQuery lightbox and modal window plugin
	(c) 2013 Jack Moore - http://www.jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(ba,aR,a5){function aX(a,c,d){var b=aR.createElement(a);return c&&(b.id=aa+c),d&&(b.style.cssText=d),ba(b)}function aZ(){return a5.innerHeight?a5.innerHeight:ba(a5).height()}function aT(c){var b=a2.length,a=(aL+c)%b;return 0>a?b+a:a}function a6(b,a){return Math.round((/%/.test(b)?("x"===a?aA.width():aZ())/100:1)*parseInt(b,10))}function a1(b,a){return b.photo||b.photoRegex.test(a)}function aS(b,a){return b.retinaUrl&&a5.devicePixelRatio>1?a.replace(b.photoRegex,b.retinaSuffix):a}function be(a){"contains" in a7[0]&&!a7[0].contains(a.target)&&(a.stopPropagation(),a7.focus())}function bb(){var b,a=ba.data(ao,ab);null==a?(aD=ba.extend({},ac),console&&console.log&&console.log("Error: cboxElement missing settings object")):aD=ba.extend({},a);for(b in aD){ba.isFunction(aD[b])&&"on"!==b.slice(0,2)&&(aD[b]=aD[b].call(ao))}aD.rel=aD.rel||ao.rel||ba(ao).data("rel")||"nofollow",aD.href=aD.href||ba(ao).attr("href"),aD.title=aD.title||ao.title,"string"==typeof aD.href&&(aD.href=ba.trim(aD.href))}function bc(a,b){ba(aR).trigger(a),aH.triggerHandler(a),ba.isFunction(b)&&b.call(ao)}function aQ(a){aU||(ao=a,bb(),a2=ba(ao),aL=0,"nofollow"!==aD.rel&&(a2=ba("."+aV).filter(function(){var c,b=ba.data(this,ab);return b&&(c=ba(this).data("rel")||b.rel||this.rel),c===aD.rel}),aL=a2.index(ao),-1===aL&&(a2=a2.add(ao),aL=a2.length-1)),aO.css({opacity:parseFloat(aD.opacity),cursor:aD.overlayClose?"pointer":"auto",visibility:"visible"}).show(),au&&a7.add(aO).removeClass(au),aD.className&&a7.add(aO).addClass(aD.className),au=aD.className,aD.closeButton?ar.html(aD.close).appendTo(aM):ar.appendTo("<div/>"),af||(af=aK=!0,a7.css({visibility:"hidden",display:"block"}),aw=aX(ax,"LoadedContent","width:0; height:0; overflow:hidden"),aM.css({width:"",height:""}).append(aw),an=aN.height()+aC.height()+aM.outerHeight(!0)-aM.height(),bf=bd.width()+ag.width()+aM.outerWidth(!0)-aM.width(),aB=aw.outerHeight(!0),aE=aw.outerWidth(!0),aD.w=a6(aD.initialWidth,"x"),aD.h=a6(aD.initialHeight,"y"),aw.css({width:"",height:aD.h}),al.position(),bc(a8,aD.onOpen),am.add(aq).hide(),a7.focus(),aD.trapFocus&&aR.addEventListener&&(aR.addEventListener("focus",be,!0),aH.one(aJ,function(){aR.removeEventListener("focus",be,!0)})),aD.returnFocus&&aH.one(aJ,function(){ba(ao).focus()})),a0())}function a9(){!a7&&aR.body&&(ae=!1,aA=ba(a5),a7=aX(ax).attr({id:ab,"class":ba.support.opacity===!1?aa+"IE":"",role:"dialog",tabindex:"-1"}).hide(),aO=aX(ax,"Overlay").hide(),az=ba([aX(ax,"LoadingOverlay")[0],aX(ax,"LoadingGraphic")[0]]),aP=aX(ax,"Wrapper"),aM=aX(ax,"Content").append(aq=aX(ax,"Title"),ai=aX(ax,"Current"),av=ba('<button type="button"/>').attr({id:aa+"Previous"}),aj=ba('<button type="button"/>').attr({id:aa+"Next"}),ap=aX("button","Slideshow"),az),ar=ba('<button type="button"/>').attr({id:aa+"Close"}),aP.append(aX(ax).append(aX(ax,"TopLeft"),aN=aX(ax,"TopCenter"),aX(ax,"TopRight")),aX(ax,!1,"clear:left").append(bd=aX(ax,"MiddleLeft"),aM,ag=aX(ax,"MiddleRight")),aX(ax,!1,"clear:left").append(aX(ax,"BottomLeft"),aC=aX(ax,"BottomCenter"),aX(ax,"BottomRight"))).find("div div").css({"float":"left"}),ad=aX(ax,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),am=aj.add(av).add(ai).add(ap),ba(aR.body).append(aO,a7.append(aP,ad)))}function aW(){function a(b){b.which>1||b.shiftKey||b.altKey||b.metaKey||b.ctrlKey||(b.preventDefault(),aQ(this))}return a7?(ae||(ae=!0,aj.click(function(){al.next()}),av.click(function(){al.prev()}),ar.click(function(){al.close()}),aO.click(function(){aD.overlayClose&&al.close()}),ba(aR).bind("keydown."+aa,function(c){var b=c.keyCode;af&&aD.escKey&&27===b&&(c.preventDefault(),al.close()),af&&aD.arrowKey&&a2[1]&&!c.altKey&&(37===b?(c.preventDefault(),av.click()):39===b&&(c.preventDefault(),aj.click()))}),ba.isFunction(ba.fn.on)?ba(aR).on("click."+aa,"."+aV,a):ba("."+aV).live("click."+aa,a)),!0):!1}function a0(){var g,d,b,c=al.prep,e=++ah;aK=!0,a4=!1,ao=a2[aL],bb(),bc(aY),bc(aG,aD.onLoad),aD.h=aD.height?a6(aD.height,"y")-aB-an:aD.innerHeight&&a6(aD.innerHeight,"y"),aD.w=aD.width?a6(aD.width,"x")-aE-bf:aD.innerWidth&&a6(aD.innerWidth,"x"),aD.mw=aD.w,aD.mh=aD.h,aD.maxWidth&&(aD.mw=a6(aD.maxWidth,"x")-aE-bf,aD.mw=aD.w&&aD.w<aD.mw?aD.w:aD.mw),aD.maxHeight&&(aD.mh=a6(aD.maxHeight,"y")-aB-an,aD.mh=aD.h&&aD.h<aD.mh?aD.h:aD.mh),g=aD.href,ay=setTimeout(function(){az.show()},100),aD.inline?(b=aX(ax).hide().insertBefore(ba(g)[0]),aH.one(aY,function(){b.replaceWith(aw.children())}),c(ba(g))):aD.iframe?c(" "):aD.html?c(aD.html):a1(aD,g)?(g=aS(aD,g),a4=aR.createElement("img"),ba(a4).addClass(aa+"Photo").bind("error",function(){aD.title=!1,c(aX(ax,"Error").html(aD.imgError))}).one("load",function(){var a;e===ah&&(ba.each(["alt","longdesc","aria-describedby"],function(h,f){var j=ba(ao).attr(f)||ba(ao).attr("data-"+f);j&&a4.setAttribute(f,j)}),aD.retinaImage&&a5.devicePixelRatio>1&&(a4.height=a4.height/a5.devicePixelRatio,a4.width=a4.width/a5.devicePixelRatio),aD.scalePhotos&&(d=function(){a4.height-=a4.height*a,a4.width-=a4.width*a},aD.mw&&a4.width>aD.mw&&(a=(a4.width-aD.mw)/a4.width,d()),aD.mh&&a4.height>aD.mh&&(a=(a4.height-aD.mh)/a4.height,d())),aD.h&&(a4.style.marginTop=Math.max(aD.mh-a4.height,0)/2+"px"),a2[1]&&(aD.loop||a2[aL+1])&&(a4.style.cursor="pointer",a4.onclick=function(){al.next()}),a4.style.width=a4.width+"px",a4.style.height=a4.height+"px",setTimeout(function(){c(a4)},1))}),setTimeout(function(){a4.src=g},1)):g&&ad.load(g,aD.data,function(f,a){e===ah&&c("error"===a?aX(ax,"Error").html(aD.xhrError):ba(this).contents())})}var aO,a7,aP,aM,aN,bd,ag,aC,a2,aA,aw,ad,az,aq,ai,ap,aj,av,ar,am,aD,an,bf,aB,aE,ao,aL,a4,af,aK,aU,ay,al,au,ae,ac={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:0.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},ab="colorbox",aa="cbox",aV=aa+"Element",a8=aa+"_open",aG=aa+"_load",aI=aa+"_complete",a3=aa+"_cleanup",aJ=aa+"_closed",aY=aa+"_purge",aH=ba("<a/>"),ax="div",ah=0,ak={},aF=function(){function j(){clearTimeout(g)}function k(){(aD.loop||a2[aL+1])&&(j(),g=setTimeout(al.next,aD.slideshowSpeed))}function f(){ap.html(aD.slideshowStop).unbind(m).one(m,b),aH.bind(aI,k).bind(aG,j),a7.removeClass(d+"off").addClass(d+"on")}function b(){j(),aH.unbind(aI,k).unbind(aG,j),ap.html(aD.slideshowStart).unbind(m).one(m,function(){al.next(),f()}),a7.removeClass(d+"on").addClass(d+"off")}function c(){a=!1,ap.hide(),j(),aH.unbind(aI,k).unbind(aG,j),a7.removeClass(d+"off "+d+"on")}var a,g,d=aa+"Slideshow_",m="click."+aa;return function(){a?aD.slideshow||(aH.unbind(a3,c),c()):aD.slideshow&&a2[1]&&(a=!0,aH.one(a3,c),aD.slideshowAuto?f():b(),ap.show())}}();ba.colorbox||(ba(a9),al=ba.fn[ab]=ba[ab]=function(b,a){var c=this;if(b=b||{},a9(),aW()){if(ba.isFunction(c)){c=ba("<a/>"),b.open=!0}else{if(!c[0]){return c}}a&&(b.onComplete=a),c.each(function(){ba.data(this,ab,ba.extend({},ba.data(this,ab)||ac,b))}).addClass(aV),(ba.isFunction(b.open)&&b.open.call(c)||b.open)&&aQ(c[0])}return c},al.position=function(n,g){function e(){aN[0].style.width=aC[0].style.width=aM[0].style.width=parseInt(a7[0].style.width,10)-bf+"px",aM[0].style.height=bd[0].style.height=ag[0].style.height=parseInt(a7[0].style.height,10)-an+"px"}var b,f,p,k=0,h=0,j=a7.offset();if(aA.unbind("resize."+aa),a7.css({top:-90000,left:-90000}),f=aA.scrollTop(),p=aA.scrollLeft(),aD.fixed?(j.top-=f,j.left-=p,a7.css({position:"fixed"})):(k=f,h=p,a7.css({position:"absolute"})),h+=aD.right!==!1?Math.max(aA.width()-aD.w-aE-bf-a6(aD.right,"x"),0):aD.left!==!1?a6(aD.left,"x"):Math.round(Math.max(aA.width()-aD.w-aE-bf,0)/2),k+=aD.bottom!==!1?Math.max(aZ()-aD.h-aB-an-a6(aD.bottom,"y"),0):aD.top!==!1?a6(aD.top,"y"):Math.round(Math.max(aZ()-aD.h-aB-an,0)/2),a7.css({top:j.top,left:j.left,visibility:"visible"}),aP[0].style.width=aP[0].style.height="9999px",b={width:aD.w+aE+bf,height:aD.h+aB+an,top:k,left:h},n){var m=0;ba.each(b,function(a){return b[a]!==ak[a]?(m=n,void 0):void 0}),n=m}ak=b,n||a7.css(b),a7.dequeue().animate(b,{duration:n||0,complete:function(){e(),aK=!1,aP[0].style.width=aD.w+aE+bf+"px",aP[0].style.height=aD.h+aB+an+"px",aD.reposition&&setTimeout(function(){aA.bind("resize."+aa,al.position)},1),g&&g()},step:e})},al.resize=function(b){var a;af&&(b=b||{},b.width&&(aD.w=a6(b.width,"x")-aE-bf),b.innerWidth&&(aD.w=a6(b.innerWidth,"x")),aw.css({width:aD.w}),b.height&&(aD.h=a6(b.height,"y")-aB-an),b.innerHeight&&(aD.h=a6(b.innerHeight,"y")),b.innerHeight||b.height||(a=aw.scrollTop(),aw.css({height:"auto"}),aD.h=aw.height()),aw.css({height:aD.h}),a&&aw.scrollTop(a),al.position("none"===aD.transition?0:aD.speed))},al.prep=function(c){function g(){return aD.w=aD.w||aw.width(),aD.w=aD.mw&&aD.mw<aD.w?aD.mw:aD.w,aD.w}function e(){return aD.h=aD.h||aw.height(),aD.h=aD.mh&&aD.mh<aD.h?aD.mh:aD.h,aD.h}if(af){var b,f="none"===aD.transition?0:aD.speed;aw.empty().remove(),aw=aX(ax,"LoadedContent").append(c),aw.hide().appendTo(ad.show()).css({width:g(),overflow:aD.scrolling?"auto":"hidden"}).css({height:e()}).prependTo(aM),ad.hide(),ba(a4).css({"float":"none"}),b=function(){function k(){ba.support.opacity===!1&&a7[0].style.removeAttribute("filter")}var o,l,d=a2.length,j="frameBorder",m="allowTransparency";af&&(l=function(){clearTimeout(ay),az.hide(),bc(aI,aD.onComplete)},aq.html(aD.title).add(aw).show(),d>1?("string"==typeof aD.current&&ai.html(aD.current.replace("{current}",aL+1).replace("{total}",d)).show(),aj[aD.loop||d-1>aL?"show":"hide"]().html(aD.next),av[aD.loop||aL?"show":"hide"]().html(aD.previous),aF(),aD.preloading&&ba.each([aT(-1),aT(1)],function(){var a,p,q=a2[this],h=ba.data(q,ab);h&&h.href?(a=h.href,ba.isFunction(a)&&(a=a.call(q))):a=ba(q).attr("href"),a&&a1(h,a)&&(a=aS(h,a),p=aR.createElement("img"),p.src=a)})):am.hide(),aD.iframe?(o=aX("iframe")[0],j in o&&(o[j]=0),m in o&&(o[m]="true"),aD.scrolling||(o.scrolling="no"),ba(o).attr({src:aD.href,name:(new Date).getTime(),"class":aa+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",l).appendTo(aw),aH.one(aY,function(){o.src="//about:blank"}),aD.fastIframe&&ba(o).trigger("load")):l(),"fade"===aD.transition?a7.fadeTo(f,1,k):k())},"fade"===aD.transition?a7.fadeTo(f,0,function(){al.position(0,b)}):al.position(f,b)}},al.next=function(){!aK&&a2[1]&&(aD.loop||a2[aL+1])&&(aL=aT(1),aQ(a2[aL]))},al.prev=function(){!aK&&a2[1]&&(aD.loop||aL)&&(aL=aT(-1),aQ(a2[aL]))},al.close=function(){af&&!aU&&(aU=!0,af=!1,bc(a3,aD.onCleanup),aA.unbind("."+aa),aO.fadeTo(aD.fadeOut||0,0),a7.stop().fadeTo(aD.fadeOut||0,0,function(){a7.add(aO).css({opacity:1,cursor:"auto"}).hide(),bc(aY),aw.empty().remove(),setTimeout(function(){aU=!1,bc(aJ,aD.onClosed)},1)}))},al.remove=function(){a7&&(a7.stop(),ba.colorbox.close(),a7.stop().remove(),aO.remove(),aU=!1,a7=null,ba("."+aV).removeData(ab).removeClass(aV),ba(aR).unbind("click."+aa))},al.element=function(){return ba(ao)},al.settings=ac)})(jQuery,document,window);$.fn.serializeObject=function(){var c={};var b=this.serializeArray();$.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c};